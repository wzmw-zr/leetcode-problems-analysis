# 区间DP题型与方法分析

区间DP的核心在于**==如何对区间进行分解，之后又如何合并子区间进行状态转移==**。有些问题需要对区间进行合并操作，但是状态转移方程还是需要进行区间分解。

别人的一个很好的区间DP归纳笔记 https://www.luogu.com.cn/blog/BreakPlus/ou-jian-dp-zong-jie-ti-xie。



## 一、区间分解——两个区间

### 1. 石子合并 —— 每次合并2堆连续石子

每次将两堆连续石子合并为一堆，代价函数$cost(weights[i],weights[j])$，如果要最小化代价，定义状态$dp[i][j]$为将$[i,j]$的石子合并之后的最小代价，状态转移方程为：
$$
dp[i][j]=\min(dp[i][k]+dp[k+1][j]+cost(weights[i:k],weights[k+1:j]))
$$
如果按照正常动态规划的递推写法的话，按照区间长度从小到大进行枚举并状态转移。

如果按照记忆化搜索写的话，不需要在意那么多。

> 如果可以合并不连续石子的话，就是贪心问题了，使用优先队列求解即可。

### 2. 多边形三角剖分

将多边形剖分成若干个三角形，可以求划分方案数、划分的最小代价等等。以划分的最小代价为例，定义$dp[i][j]$为$[i,j]$之间的节点构成的多边形的三角剖分最小代价，代价函数为$cost(vals[a],vals[b],vals[c])$，状态转移方程为：
$$
dp[i][j]=\min(dp[i][k]+dp[k][j]+cost(vals[i],vals[i+1],vals[k]))
$$
**其他和多边形三角剖分类似的区间DP，其特点如下：给端点$(i,j)$找一个合适的$k$组成三元组**。



## 二、区间分解——多个区间

### 1. 石子合并 —— 每次合并K堆连续石子

设状态$dp[i][j][x]$表示将$[i,j]$之间的石子划分成x堆的最小代价，状态转移方程如下：
$$
dp[i][j][1]=\min(dp[i][i+a*k][k]+dp[i+a*k+1][j][k-1]+cost(i,j))\\
dp[i][j][m]=\min(dp[i][i+a*k][1]+dp[i+a*k+1][j][m-1]+cost(i,j))
$$


## 三、区间分解——左/右端点 + 一个区间

常见的有"关路灯"，不过这种类型的问题，状态转移通常是从$[i,j-1]$或$[i+1,j]$到$[i,j]$。



## 四、回文串相关

回文串子数组/子序列等等，很多都可以转化为区间DP，虽然有时候会超时。